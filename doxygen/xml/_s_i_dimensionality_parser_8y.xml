<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.13.2" xml:lang="en-US">
  <compounddef id="_s_i_dimensionality_parser_8y" kind="file" language="C++">
    <compoundname>SIDimensionalityParser.y</compoundname>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline><highlight class="normal">%{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>#include<sp/>&lt;stdio.h&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>#include<sp/>&quot;SILibrary.h&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>void<sp/>yyerror(char<sp/>*s,<sp/>...);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>static<sp/>SIDimensionalityRef<sp/>final_dimensionality;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>OCStringRef<sp/>dimensionalityError;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>int<sp/>sidlex(void);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>%}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">%name-prefix=&quot;sid&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">%union<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>SIDimensionalityRef<sp/>dimensionality;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>int<sp/><sp/><sp/><sp/>iVal;</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">%token<sp/>&lt;dimensionality&gt;<sp/>DIMENSIONALITY</highlight></codeline>
<codeline><highlight class="normal">%token<sp/>&lt;iVal&gt;<sp/>INTEGER</highlight></codeline>
<codeline><highlight class="normal">%type<sp/>&lt;dimensionality&gt;<sp/>exp<sp/>calclist</highlight></codeline>
<codeline><highlight class="normal">%left<sp/>&apos;*&apos;<sp/>&apos;/&apos;</highlight></codeline>
<codeline><highlight class="normal">%left<sp/>&apos;^&apos;</highlight></codeline>
<codeline><highlight class="normal">%%</highlight></codeline>
<codeline><highlight class="normal">calclist:<sp/>/*<sp/>do<sp/>nothing<sp/>*/<sp/>{<sp/>$$<sp/>=<sp/>NULL;<sp/>}</highlight></codeline>
<codeline><highlight class="normal">|<sp/>calclist<sp/>exp<sp/>{final_dimensionality<sp/>=<sp/>$2;}</highlight></codeline>
<codeline><highlight class="normal">;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">exp:<sp/>&apos;(&apos;<sp/>exp<sp/>&apos;)&apos;<sp/>{$$<sp/>=<sp/>$2;}</highlight></codeline>
<codeline><highlight class="normal">|<sp/>exp<sp/>&apos;*&apos;<sp/>exp<sp/>{$$<sp/>=<sp/>SIDimensionalityByMultiplyingWithoutReducing($1,$3,&amp;dimensionalityError);}</highlight></codeline>
<codeline><highlight class="normal">|<sp/>exp<sp/>&apos;/&apos;<sp/>exp<sp/>{$$<sp/>=<sp/>SIDimensionalityByDividingWithoutReducing($1,$3);}</highlight></codeline>
<codeline><highlight class="normal">|<sp/>exp<sp/>&apos;^&apos;<sp/>INTEGER<sp/>{$$<sp/>=<sp/>SIDimensionalityByRaisingToAPowerWithoutReducing($1,$3,&amp;dimensionalityError);}</highlight></codeline>
<codeline><highlight class="normal">|<sp/>INTEGER<sp/>&apos;/&apos;<sp/>exp<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>if($1<sp/>==<sp/>1)<sp/>{$$<sp/>=<sp/>SIDimensionalityByRaisingToAPowerWithoutReducing($3,-1,&amp;dimensionalityError);}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>else<sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dimensionalityError<sp/>=<sp/>STR(&quot;Unknown<sp/>dimensionality<sp/>symbol&quot;);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>yyerror(&quot;Unknown<sp/>unit<sp/>symbol&quot;);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal">|<sp/>DIMENSIONALITY</highlight></codeline>
<codeline><highlight class="normal">;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">%%</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">extern<sp/>int<sp/>sid_scan_string(const<sp/>char<sp/>*);</highlight></codeline>
<codeline><highlight class="normal">extern<sp/>void<sp/>sidlex_destroy(void);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">bool<sp/>sid_syntax_error;</highlight></codeline>
<codeline><highlight class="normal">SIDimensionalityRef<sp/>SIDimensionalityForSymbol(OCStringRef<sp/>string,<sp/>OCStringRef<sp/>*error)</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>if(error)<sp/>if(*error)<sp/>return<sp/>NULL;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>OCMutableStringRef<sp/><sp/>mutString<sp/>=<sp/>OCStringCreateMutableCopy(string);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>OCStringTrimWhitespace(mutString);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>if(OCStringGetLength(mutString)<sp/>==<sp/>1)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>SIDimensionalityRef<sp/>result<sp/>=<sp/>SIDimensionalityWithBaseDimensionSymbol(mutString,error);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>OCRelease(mutString);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>result;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>OCStringFindAndReplace2(mutString,STR(&quot;•&quot;),STR(&quot;*&quot;));</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>OCStringFindAndReplace2(mutString,STR(&quot;ϴ&quot;),<sp/>STR(&quot;@&quot;));</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>final_dimensionality<sp/>=<sp/>NULL;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>dimensionalityError<sp/>=<sp/>NULL;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>sid_syntax_error<sp/>=<sp/>false;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>uint64_t<sp/>length<sp/>=<sp/>OCStringGetLength(mutString);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>if(length)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>const<sp/>char<sp/>*cString<sp/>=<sp/>OCStringGetCString(mutString);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sid_scan_string(cString);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sidparse();</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sidlex_destroy();</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>OCRelease(mutString);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>if(dimensionalityError)<sp/>*error<sp/>=<sp/>dimensionalityError;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>return<sp/>final_dimensionality;</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">void<sp/>yyerror(char<sp/>*s,<sp/>...)</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>fprintf(stderr,<sp/>&quot;error:<sp/>%s\n&quot;,s);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>sid_syntax_error<sp/>=<sp/>true;</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline></codeline>
<codeline></codeline>
    </programlisting>
    <location file="SIDimensionalityParser.y"/>
  </compounddef>
</doxygen>
